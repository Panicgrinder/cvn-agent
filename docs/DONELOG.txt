# DONELOG – Abgeschlossene Arbeiten

Hinweis:
- Bitte jede abgeschlossene, nicht-triviale Änderung hier kurz dokumentieren.
- Format: YYYY-MM-DD HH:MM | Author | Kurzbeschreibung
- Keine sensiblen Inhalte eintragen.

Beispiel:
2025-10-15 12:34 | username | Eval-Pipeline stabilisiert; map_reduce_summary_llm typisiert; Doku aktualisiert.
2025-10-15 14:10 | Copilot | CI erweitert: DONELOG-Prüfung auch bei Push auf main; VS Code Task zum schnellen Eintrag hinzugefügt.
2025-10-15 14:22 | Copilot | Optionale Absicherung: lokaler pre-commit Hook (.githooks) + VS Code Tasks zum Installieren/Prüfen; Tasks portabilisiert.
2025-10-15 14:27 | Copilot | Neuer System-Prompt: docs/AGENT_PROMPT.md; VS Code Task zum Kopieren in die Zwischenablage.
2025-10-15 16:05 | Copilot | Pyright auf 1.1.406 aktualisiert; 0 Fehler/0 Warnungen; mypy/pytest grün.
2025-10-15 16:12 | Copilot | VS Code Tasks portabilisiert; ProblemMatcher für pyright/mypy hinzugefügt; schema warnings behoben.
2025-10-15 16:18 | Copilot | Markdownlint eingeführt (.markdownlint.json); Lint/Fix Tasks; Pre-commit Hook um Markdownlint mit Auto-Fix erweitert.
2025-10-15 16:26 | Copilot | README/TODO/Customization nach markdownlint (MD031/MD032/MD012/MD009/MD007) bereinigt.
2025-10-15 16:41 | Copilot | VS Code Tasks: Git-Hook-Verify/Run auf PowerShell umgestellt; doppelte Ad-hoc-Tasks entfernt; JSON-Syntaxfehler behoben.
2025-10-15 16:44 | Copilot | Markdownlint: npx-basierte Tasks ergänzt und PowerShell-Fallback-Task hinzugefügt (npx oder globales markdownlint).
2025-10-15 16:58 | Copilot | mypy: `scripts/run_eval.py` auf check_untyped_defs=True gestellt; ungenutzte ignores entfernt; Typen/Casts ergänzt; Tests grün.
2025-10-15 17:06 | Copilot | mypy: `scripts/eval_ui.py` auf check_untyped_defs=True gestellt; unused ignores entfernt; Variable umbenannt; Tests grün.
2025-10-15 17:34 | Copilot | mypy: Enforcement abgeschlossen für curate_dataset_from_latest.py, openai_finetune.py, train_lora.py; unnötige ignores entfernt; kleinere Typanpassungen; pytest grün.
2025-10-15 17:55 | Copilot | Tests: Marker-Gruppierung (unit/api/streaming/eval/scripts) eingeführt; Streaming-Fehlerpfad, dependency_check und Export→Prepare-Pipeline als offline-Tests ergänzt; Tasks für Marker-Läufe.
2025-10-15 17:48 | Copilot | Tests gruppiert: pytest-Marker (unit, api, streaming, eval, scripts) eingeführt; VS Code Tasks für gruppierte Läufe hinzugefügt; Marker auf repräsentative Tests angewendet.
2025-10-15 17:18 | Copilot | mypy-Enforcement bestätigt: `scripts/eval_ui.py` clean; pytest erneut grün; TODO/DONELOG aktualisiert.
2025-10-15 18:05 | Copilot | Rate-Limit/Timeout-Tests ergänzt; Middleware wandelt HTTPException in JSONResponse um und setzt X-Request-ID auch bei Fehlern; Header dokumentiert.
2025-10-15 18:22 | Copilot | Coverage erweitert: Prompt-/Options-Parsing, Context-Notes-Injektion, Settings-Validatoren, LLM-Service Success/Fail, Summary-Kantenfälle; .coveragerc mit Branch-Coverage; VS Code Coverage-Tasks; kombiniertes Fail-Under auf 80 angehoben.
2025-10-15 18:47 | Copilot | ID-Normalisierung vereinheitlicht ("eval-" Präfix) in export_finetune/rerun_failed/eval_ui; Utils: strip_eval_prefix/ensure_eval_prefix; Test für gemischte IDs; Cross-Drive relpath-Fixes in audit_workspace/rerun_failed/map_reduce_summary.
2025-10-15 19:02 | Copilot | Script-Smokes hinzugefügt (audit_workspace, smoke_asgi, fine_tune_pipeline, openai_ft_status, open_latest_summary, map_reduce_summary); OpenAI-Client im Test stubbed; minimale Script-Abdeckung >5% erreicht; Teil-Suites grün.
2025-10-15 19:18 | Copilot | Datensatzkurierung aus Logs: VS Code Task "Curate dataset (latest)" ergänzt; Smoke-Test für `scripts/curate_dataset_from_latest.py` hinzugefügt (Export/Prepare gepatcht, stdout-Report geprüft).
2025-10-16 09:40 | Copilot | Chai-Datensatz vereinfacht (must_include reduziert), Synonyms-Overlay erweitert (freundlich/empathisch/einfühlsam/zuwenden), Beispiel-Test `tests/test_chai_checks.py` hinzugefügt.
2025-10-16 09:41 | Copilot | Export/Kuratierung robuster: `EVAL_FILE_PATTERN` auf `eval-*.json*` erweitert; `export_finetune` nutzt `source_file` aus Results für zuverlässige Zuordnung; Mini-LoRA-Lauf (10 Schritte) auf chai-Pack durchgeführt.
2025-10-16 09:45 | Copilot | Docs aktualisiert: AGENT_PROMPT.md um Pipeline/PowerShell‑Shortcuts/Artefakte erweitert; ARCHIVE_PLAN.md mit Status & Prüfkommandos ergänzt; TODO.md Fortschritte/Robustheit dokumentiert.
2025-10-17 10:10 | Copilot | Eval: optionaler Response-Cache in `scripts/run_eval.py` (`--cache`), Near-Dedupe in `prepare_finetune_pack.py` (`--near-dup-threshold`), neue Tests hinzugefügt; VS Code Test-Explorer konfiguriert (pytest), Run-&-Debug-Profile für Marker.
2025-10-18 09:15 | Copilot | Reruns: `scripts/rerun_from_results.py` (profile-aware, liest Meta/Overrides/Patterns), Pattern-Normalisierung implementiert; Smoke-Test hinzugefügt.
2025-10-19 12:12 | Copilot | Backup: Separates Backup-Repo finalisiert (origin auf neues Repo), orphan main mit README+MANIFEST; GitHub Release erstellt und alle Snapshot-Dateien als Assets hochgeladen (um LFS-Grenzen zu vermeiden).
2025-10-19 12:14 | Copilot | VS Code: Task "Eval: rerun from results" hinzugefügt; docs/TODO.md und docs/DONELOG.txt aktualisiert.
2025-10-19 12:28 | Copilot | Backup-Härtung: cvn-root-files ZIP sanitized (ohne .env) und im Release ersetzt; MANIFEST mit SHA-256 für alle Assets aktualisiert; README mit Restore-Anleitung ergänzt.
2025-10-19 13:05 | Copilot | Tests: Neue Script-Smokes (todo_gather, customize_prompts, map_reduce_summary_llm, open_latest_summary, fine_tune_pipeline) hinzugefügt; Scripts-Abdeckung auf ~67% erhöht.
2025-10-19 14:25 | Copilot | Tests: Integration "alpaca Export→Prepare" ergänzt; Edge-Tests für export_finetune, open_context_notes, rerun_failed, fine_tune_pipeline und App-Header auf 400; Suite grün, erneute Scripts-Coverage-Messung anstehend.
2025-10-19 15:10 | Copilot | Tests: 3+1-Runde durchgeführt (customize_prompts EOF/KeyboardInterrupt, map_reduce_summary Markdown+Excludes, fine_tune_pipeline Happy-Path, /health Header). Suite grün, Scripts-Coverage ~75%.
2025-10-19 15:30 | Copilot | Tests: 3+1-Runde II (map_reduce_summary Python/JSON-Zweige, rerun_failed JSON-Array, export_finetune Outdir-Fallback, /404 Header). Suite grün, Scripts-Coverage ~78%.
2025-10-19 15:50 | Copilot | Tests: 3+1-Runde III (fine_tune_pipeline fp16 & KeyboardInterrupt, export_finetune openai_chat include_failures, /chat/stream Fehler als SSE). Suite grün, Scripts-Coverage ~78%.
2025-10-19 16:10 | Copilot | Tests: 3+1-Runde IV (migrate_dataset_schemas Happy-Path, openai_ft_status Snapshot & Follow). Suite grün, Scripts-Coverage ~79%.
2025-10-19 16:28 | Copilot | Tests: 3+1-Runde V (audit_workspace Fallback, curate_dataset_from_latest Minimal-Flow, open_context_notes Happy, /chat Fehlerpfad). Suite grün, Scripts-Coverage ~79%.
2025-10-19 17:05 | Copilot | Tests: 3+1-Runde VI (curate_dataset_from_latest Filter-Exit-5; audit_workspace Referenzsuche; / Root Request-ID Header). Suite grün; Scripts-Coverage jetzt 80% (Branch-Coverage aktiv).
2025-10-20 09:10 | Copilot | Tests: 3+1-Runde VII (curate positive Filterpfad, audit Reachability-Graph, open_latest_summary open-Path, App Rate-Limit-Header). Neue Pfade abgedeckt; Schnelllauf grün.
2025-10-20 10:00 | Copilot | TODO/DONELOG aktualisiert; Konsistenzprüfung Runde 1 durchgeführt; Reports-Standard vorgeschlagen (eval/results/reports/<topic>/<ts> mit report.md und params.txt).
2025-10-20 10:20 | Copilot | Re-Check Konsistenz nach Löschungen: cleanup_recommendations.md aktualisiert; cleanup_phase3.ps1 portabel gemacht; REPORTS.md erstellt; Report abgelegt unter eval/results/reports/consistency/20251020_1015/.
2025-10-20 20:45 | Copilot | Demo→Fantasy-Umstellung konsolidiert (Code/Tests/Docs); Reporting-Skripte (Dependencies/Coverage/Consistency) ergänzt; CI-Workflow für Reports hinzugefügt; Legacy-Bereinigung: doppelten Re-Import in app/services/__init__.py entfernt, Rerun-Failed-Status in todo_gather vereinheitlicht, WORKSPACE_INDEX um Top-Level-Duplikat bereinigt.
2025-10-20 21:10 | Copilot | Endpoints final bereinigt (app/api/endpoints/* entfernt), README/WORKSPACE_INDEX aktualisiert, TODO-Drift korrigiert; Reports-Skripte lokal erfolgreich ausgeführt (dependencies/coverage placeholder/consistency).
2025-10-21 09:25 | Copilot | Pyright Linux-Fix: `scripts/open_context_notes.py` und `scripts/open_latest_summary.py` plattformneutral (webbrowser/open/xdg-open), `os.startfile` nur noch guarded; ungenutzte type: ignore entfernt.
2025-10-21 09:28 | Copilot | `scripts/run_eval.py`: `rich` optional gemacht (Console/Table/Progress Fallbacks) und Typen für `progress.update` bereinigt; mypy/pyright grün.
2025-10-21 09:31 | Copilot | `scripts/openai_ft_status.py`: Import von `openai` optional; Fehlerausgabe nur bei tatsächlicher Nutzung, Tests können `OpenAI` stubben.
2025-10-21 09:34 | Copilot | Synonyme erweitert: Eintrag für „empathisch“ (einfühlsam, zugewandt, mitfühlend, verständnisvoll, empathie) ergänzt; `tests/test_chai_checks.py` besteht.
2025-10-21 09:38 | Copilot | CI: `workflow_dispatch` zur CI hinzugefügt (manuelle Runs möglich); alle Checks grün (CI/build-test, Enforce DONELOG, Consistency & Reports).
2025-10-21 12:00 | Copilot | Chat-Options zentral normalisiert (normalize_ollama_options) und in Stream/Non-Stream verdrahtet; Policy-Stream-Tests (Pyright) stabilisiert; Copilot-Anleitung (PR-Checkliste/Marker/Pitfalls) geschärft.
2025-10-21 12:15 | Copilot | .gitignore: Kontext-Notizen konsolidiert (eval/config/context.local.* statt Einzellisten); keine weiteren Änderungen.
2025-10-21 13:29 | Copilot | Zeitstempel vereinheitlicht: utils/time_utils.py eingeführt; convlog nutzt now_iso(); append_done nutzt now_human(); schnelle Tests grün.
2025-10-21 13:35 | Copilot | Kompakte Timestamps zentralisiert: Scripts auf now_compact() umgestellt (export_finetune, map_reduce_summary[_llm], run_eval, rerun_from_results, reports/*, eval_ui, fine_tune_pipeline, todo_gather); Scripts-Tests grün.
2025-10-21 12:47 | Panicgrinder | Reports: Konsistenz/Dependencies/Coverage Generatoren repariert (sys.path + now_compact); Reports erzeugt.
2025-10-21 12:54 | Panicgrinder | TODO: Cleanup-Kandidaten-Sektion basierend auf Konsistenz-Report ergänzt; CLI-Tools markiert.
2025-10-21 20:53 | Panicgrinder | Docs: removed remaining Compose mention in TODO (superproject and submodule). Also restored VS Code settings from backup to undo catch-all auto-approve.
2025-10-21 20:57 | Panicgrinder | Tests: add pytest norecursedirs to ignore nested submodule; fix import mismatch and restore stable test runs (api, streaming, unit passing).
2025-10-21 22:00 | Panicgrinder | Docs: add docs-only history purge plan and helper script; wording cleanup in DONELOG.
2025-10-21 22:50 | Panicgrinder | Types: fix mypy errors in chat.py, content_management.py, and run_eval.py; no runtime behavior change.
2025-10-21 23:36 | Panicgrinder | Docs: add BEHAVIOR.md (Projektverhalten) und WORKSPACE_INDEX.md aktualisiert.
2025-10-22 00:41 | Panicgrinder | Eval: start overnight run (ASGI) tag=overnight-20251022; results will be summarized after completion.
2025-10-22 00:53 | Panicgrinder | Eval: Teilrun 50/136 (ASGI) saved to results_20251022_0042_overnight-20251022.jsonl; report at docs/reports/overnight-20251022.md.
2025-10-22 01:01 | Panicgrinder | Automation: add summarize_eval_results.py and VS Code task for overnight eval + auto report.
2025-10-22 01:11 | Panicgrinder | Add generator script for new eval items and create dataset eval-101-300_generated_v1.0.jsonl (200 items)
2025-10-22 13:54 | Panicgrinder | Docs konsolidiert: AGENT_BEHAVIOR.md erstellt (Merge aus AGENT_PROMPT.md + BEHAVIOR.md); Settings CONTEXT_NOTES_PATHS um AGENT_BEHAVIOR/TODO/DONELOG erweitert; Referenzen & VS Code Task aktualisiert.
2025-10-22 14:17 | Panicgrinder | Kontext: Digest in eval/config/context.local.md; Platzhalter-Logs für heute/gestern (data/logs/YYYY-MM-DD.jsonl) erstellt; Historie in docs/AGENT_BEHAVIOR.md präzisiert; TODO aktualisiert.
2025-10-22 16:50 | Panicgrinder | Docs/Tasks: Referenzen nach Entfernen der verschachtelten Kopie geprueft; keine verbleibenden  enter cvn-agent/-Hinweise; VS Code Task auf AGENT_BEHAVIOR.md umgestellt; Tests gruen; Typechecks: Pyright 1 Fehler (Test named arg), Mypy weist bestehende unused-ignore in Tests aus.
2025-10-22 17:30 | Panicgrinder | Typechecks gruen: Pyright Warnungen nur; Mypy konfiguriert (warn_unused_ignores in tests deaktiviert); Test-Fix: eval_mode aus ChatRequest() entfernt; tzinfo-Typ fix in time_utils.
2025-10-22 18:56 | Panicgrinder | docs/prompts: Sprache dauerhaft auf Deutsch gesetzt (AGENT_BEHAVIOR.md, DEFAULT_SYSTEM_PROMPT, context.local.md). Tests/Typen grün.
2025-10-22 19:19 | Panicgrinder | lint: Pyright-Warnungen reduziert  unbenutzte Imports in Scripts entfernt (curate_dataset_from_latest, eval_ui, export_finetune, fine_tune_pipeline, generate_eval_dataset, map_reduce_summary(_llm), reports/*, rerun_from_results, todo_gather). Tests/Typen grün.
2025-10-22 23:52 | Panicgrinder | Context notes: directory + .ref support; added eval/config/context.notes with 5 pinned refs; updated AGENT_BEHAVIOR.md
2025-10-23 00:22 | Panicgrinder | Context notes: directory order via ORDER file; ignore README/ORDER meta; collapse excessive blank lines in loader; docs+tests updated
2025-10-23 01:13 | Panicgrinder | Tests: docs obsolete absent  AGENT_PROMPT.md darf fehlen; Mypy: unused ignore in app/core/mode.py entfernt
2025-10-23 10:00 | Copilot | Kontext-Notizen Defaults erweitert (eval/config/context.notes in CONTEXT_NOTES_PATHS); eval_loader Diagnostics um schema_issues ergänzt; Tests/Typen unverändert.
2025-10-23 10:00 | Copilot | Kontext-Notizen Budget erhöht (CONTEXT_NOTES_MAX_CHARS=12000); Standard-Pfade für pinned Notes aktiv; schnelle Tests grün.
2025-10-23 10:20 | Copilot | Cleanup: `app/schemas.py` als Deprecation-Weiterleitung auf `app/api/models.py` umgestellt (keine direkten Importe gefunden); sichere Migration ohne Bruch.
2025-10-23 10:35 | Copilot | Cleanup: `app/schemas.py` endgültig entfernt; Modelle liegen zentral in `app/api/models.py`. Kurzer Testlauf grün.
2025-10-23 10:42 | Copilot | Cleanup-Review: `content_management` aktiv genutzt (behalten), `convlog` nur Beispiele (belassen), `summarize` in Tests/Beispielen (belassen), `session_memory` genutzt (belassen); TODO entsprechend aktualisiert.
2025-10-23 10:50 | Copilot | Lizenz hinzugefügt: MIT-Lizenz-Datei (`LICENSE`) und Hinweis in README.
2025-10-23 11:05 | Copilot | Policy-Hooks: Datei-basierte Minimal-Tests für forbidden_terms/rewrite_map hinzugefügt; Nutzung über SETTINGS.POLICY_FILE verifiziert; schneller Teil-Lauf grün.
2025-10-23 11:08 | Copilot | Doku: Abschnitt „Inhalts‑Policy & Hooks (optional)“ in AGENT_BEHAVIOR.md ergänzt (Aktivierung, POLICY_FILE, Struktur, Verweise auf Implementierung/Tests).
